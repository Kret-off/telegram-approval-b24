# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Bitrix24

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. **–í–æ–π–¥–∏—Ç–µ –≤ –≤–∞—à Bitrix24**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø–æ—Ä—Ç–∞–ª: `https://your-portal.bitrix24.ru`
   - –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è" –∏–ª–∏ "Marketplace"
   - –ù–∞–∂–º–∏—Ç–µ "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º" ‚Üí "–î—Ä—É–≥–æ–µ" ‚Üí "–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

3. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é**
   ```
   –ù–∞–∑–≤–∞–Ω–∏–µ: Telegram Approval Cloud
   –ö–æ–¥: telegram_approval_cloud
   –û–ø–∏—Å–∞–Ω–∏–µ: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ Telegram
   ```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth

1. **–í —Ä–∞–∑–¥–µ–ª–µ "OAuth" —É–∫–∞–∂–∏—Ç–µ:**
   ```
   Redirect URI: https://telegram-approval-b2411.vercel.app/api/auth/bitrix24/callback
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   - **Client ID** (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–ª—è .env)
   - **Client Secret** (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–ª—è .env)

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

**–û—Ç–º–µ—Ç—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∞:**
- ‚úÖ `crm` - –¥–æ—Å—Ç—É–ø –∫ CRM
- ‚úÖ `task` - –¥–æ—Å—Ç—É–ø –∫ –∑–∞–¥–∞—á–∞–º
- ‚úÖ `user` - –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ `im` - –¥–æ—Å—Ç—É–ø –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º
- ‚úÖ `department` - –¥–æ—Å—Ç—É–ø –∫ –æ—Ç–¥–µ–ª–∞–º

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook'–æ–≤

**–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ webhook'–∏:**

1. **CRM —Å–æ–±—ã—Ç–∏—è:**
   ```
   URL: https://telegram-approval-b2411.vercel.app/api/webhooks/crm
   –°–æ–±—ã—Ç–∏—è: 
   - ONCRMDEALADD
   - ONCRMDEALUPDATE
   - ONCRMLEADADD
   - ONCRMLEADUPDATE
   ```

2. **–ó–∞–¥–∞—á–∏:**
   ```
   URL: https://telegram-approval-b2411.vercel.app/api/webhooks/tasks
   –°–æ–±—ã—Ç–∏—è:
   - ONTASKADD
   - ONTASKUPDATE
   - ONTASKCOMMENTADD
   ```

3. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π webhook:**
   ```
   URL: https://telegram-approval-b2411.vercel.app/api/webhooks/universal
   –°–æ–±—ã—Ç–∏—è: –í—Å–µ —Å–æ–±—ã—Ç–∏—è
   ```

### –®–∞–≥ 5: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. **–ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–£—Å—Ç–∞–Ω–æ–≤–∫–∞"**
3. **–ù–∞–∂–º–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"**
4. **–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É –≤–∞—Å –±—É–¥—É—Ç:

```
BITRIX24_CLIENT_ID=your_client_id_here
BITRIX24_CLIENT_SECRET=your_client_secret_here
BITRIX24_DOMAIN=https://your-portal.bitrix24.ru
```

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Vercel:

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Vercel Dashboard](https://vercel.com/dashboard)
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `telegram-approval-b2411`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Settings" ‚Üí "Environment Variables"
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ `vercel-env-vars.txt`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:**
   ```
   https://telegram-approval-b2411.vercel.app/api/auth/bitrix24
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook'–∏:**
   - –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ Bitrix24
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Bitrix24:
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram Bot
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π

## ‚ùì –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ï—Å–ª–∏ webhook'–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Bitrix24
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**–ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redirect URI
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Client ID –∏ Secret –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel
