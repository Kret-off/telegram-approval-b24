# üë®‚Äçüíº –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Telegram —Å Bitrix24 –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ backend-—Å–µ—Ä–≤–∏—Å–∞
curl https://your-domain.com/health

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
{
  "status": "ok",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "version": "1.0.0"
}
```

#### –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
curl https://your-domain.com/health/detailed

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
{
  "status": "ok",
  "checks": {
    "database": "ok",
    "telegram": "ok",
    "bitrix24": "ok",
    "memory": "ok",
    "disk": "ok"
  }
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –õ–æ–≥–∏ backend-—Å–µ—Ä–≤–∏—Å–∞
tail -f /path/to/backend/logs/app.log

# –õ–æ–≥–∏ Telegram
tail -f /path/to/backend/logs/telegram.log

# –õ–æ–≥–∏ Bitrix24
tail -f /path/to/backend/logs/bitrix24.log

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -f /path/to/backend/logs/error.log
```

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤
```bash
# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" /path/to/backend/logs/app.log

# –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
grep "user_id:123" /path/to/backend/logs/telegram.log

# –ü–æ–∏—Å–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
grep "2024-01-15" /path/to/backend/logs/app.log
```

## üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –í Bitrix24
1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   ```
   –ù–∞—Å—Ç—Ä–æ–π–∫–∏ > –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ > –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤:**
   - –ü—Ä–∞–≤–∞ –Ω–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã
   - –ü—Ä–∞–≤–∞ –Ω–∞ CRM
   - –ü—Ä–∞–≤–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ

#### –í —Å–∏—Å—Ç–µ–º–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–∞–ø–ø–∏–Ω–≥:**
   ```sql
   INSERT INTO user_mappings (
       bitrix24_portal,
       bitrix24_user_id,
       bitrix24_user_name,
       telegram_user_id,
       telegram_username,
       is_active
   ) VALUES (
       'https://company.bitrix24.ru',
       123,
       '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω',
       987654321,
       'ivanov_ivan',
       1
   );
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   curl -X GET "https://your-domain.com/api/admin/users/123" \
        -H "Authorization: Bearer YOUR_ADMIN_TOKEN"
   ```

### –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
```sql
UPDATE user_mappings 
SET is_active = 0 
WHERE bitrix24_user_id = 123;
```

#### –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
```sql
DELETE FROM user_mappings 
WHERE bitrix24_user_id = 123;
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ–ª–µ–π
```php
// –í Bitrix24
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ > –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ > –†–æ–ª–∏

// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–∏ "–°–æ–≥–ª–∞—Å–∞–Ω—Ç"
$role = array(
    'NAME' => '–°–æ–≥–ª–∞—Å–∞–Ω—Ç',
    'DESCRIPTION' => '–ü—Ä–∞–≤–∞ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤',
    'PERMISSIONS' => array(
        'bizproc' => 'W',
        'crm' => 'R',
        'telegram_approval' => 'W'
    )
);
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```bash
# –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl -X GET "https://your-domain.com/api/admin/stats" \
     -H "Authorization: Bearer YOUR_ADMIN_TOKEN"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
curl -X GET "https://your-domain.com/api/admin/stats/user/123" \
     -H "Authorization: Bearer YOUR_ADMIN_TOKEN"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥—É
curl -X GET "https://your-domain.com/api/admin/stats/period?start=2024-01-01&end=2024-01-31" \
     -H "Authorization: Bearer YOUR_ADMIN_TOKEN"
```

#### –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤
```json
{
  "total_approvals": 150,
  "approved": 120,
  "rejected": 20,
  "timeout": 10,
  "avg_response_time": "2.5h",
  "top_approvers": [
    {"user_id": 123, "name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω", "count": 25},
    {"user_id": 456, "name": "–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä", "count": 20}
  ]
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –ú–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
curl -X GET "https://your-domain.com/api/admin/metrics" \
     -H "Authorization: Bearer YOUR_ADMIN_TOKEN"

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
{
  "cpu_usage": "15%",
  "memory_usage": "45%",
  "disk_usage": "30%",
  "active_connections": 5,
  "requests_per_minute": 12
}
```

#### –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

#!/bin/bash
# check_system.sh

RESPONSE=$(curl -s https://your-domain.com/health)
STATUS=$(echo $RESPONSE | jq -r '.status')

if [ "$STATUS" != "ok" ]; then
    echo "ALERT: System is down!" | mail -s "System Alert" admin@company.com
fi
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏

#### –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞
NEW_SECRET=$(openssl rand -hex 32)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ .env
sed -i "s/BACKEND_SECRET=.*/BACKEND_SECRET=$NEW_SECRET/" .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
pm2 restart telegram-approval-backend
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Telegram Bot Token
# 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
# 2. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
# 3. –û–±–Ω–æ–≤–∏—Ç–µ –≤ .env
# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Bitrix24 —Ç–æ–∫–µ–Ω–∞
# 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –≤–µ–±—Ö—É–∫ –≤ Bitrix24
# 2. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
# 3. –û–±–Ω–æ–≤–∏—Ç–µ –≤ .env
# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
```

### –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```bash
# –ü–æ–∏—Å–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
grep "SECURITY" /path/to/backend/logs/app.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
grep "AUTH_FAILED" /path/to/backend/logs/app.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø—ã—Ç–æ–∫ –æ–±—Ö–æ–¥–∞ rate limit
grep "RATE_LIMIT" /path/to/backend/logs/app.log
```

#### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
#!/bin/bash
# daily_security_check.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
echo "Checking SSL certificate..."
openssl s_client -connect your-domain.com:443 -servername your-domain.com < /dev/null 2>/dev/null | openssl x509 -noout -dates

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
echo "Checking for updates..."
npm outdated

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
echo "Checking file permissions..."
find /path/to/backend -type f -exec ls -la {} \;
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### Backend-—Å–µ—Ä–≤–∏—Å –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
pm2 status
pm2 logs telegram-approval-backend

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
pm2 restart telegram-approval-backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep :3000
```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
mysql -u your_user -p -e "SELECT 1;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
mysql -u your_user -p telegram_approval -e "SHOW TABLES;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–∑—ã
mysql -u your_user -p -e "SELECT table_schema, ROUND(SUM(data_length + index_length) / 1024 / 1024, 2) AS 'Size (MB)' FROM information_schema.tables WHERE table_schema = 'telegram_approval';"
```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å Telegram
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
     -H "Content-Type: application/json" \
     -d '{"url": "https://your-domain.com/api/telegram/webhook"}'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞
curl https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getMe
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
mysqldump -u your_user -p telegram_approval > backup_$(date +%Y%m%d_%H%M%S).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
mysql -u your_user -p telegram_approval < backup_20240115_143000.sql
```

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env .env.backup.$(date +%Y%m%d_%H%M%S)

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.backup.20240115_143000 .env
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è MySQL
```sql
-- –ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 2;

-- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü
OPTIMIZE TABLE approvals;
OPTIMIZE TABLE approvers;
OPTIMIZE TABLE user_mappings;

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
CREATE INDEX idx_approval_status ON approvals(status);
CREATE INDEX idx_approval_created ON approvals(created_at);
CREATE INDEX idx_approver_user ON approvers(bitrix24_user_id);
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
```javascript
// –í src/database/connection.js
const sequelize = new Sequelize(/* ... */, {
  pool: {
    max: 20,        // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    min: 5,         // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    acquire: 30000, // –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    idle: 10000     // –í—Ä–µ–º—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  }
});
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis
sudo apt-get install redis-server

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ .env
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
```

```javascript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
const redis = require('redis');
const client = redis.createClient({
  host: process.env.REDIS_HOST,
  port: process.env.REDIS_PORT,
  password: process.env.REDIS_PASSWORD
});

// –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
async function getCachedApproval(approvalId) {
  const cached = await client.get(`approval:${approvalId}`);
  if (cached) {
    return JSON.parse(cached);
  }
  
  const approval = await Approval.findByPk(approvalId);
  await client.setex(`approval:${approvalId}`, 3600, JSON.stringify(approval));
  return approval;
}
```

## üîÑ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
#!/bin/bash
# backup.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/path/to/backups"

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
mysqldump -u your_user -p telegram_approval > $BACKUP_DIR/db_backup_$DATE.sql

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env $BACKUP_DIR/env_backup_$DATE

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
tar -czf $BACKUP_DIR/logs_backup_$DATE.tar.gz logs/

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
find $BACKUP_DIR -name "*.sql" -mtime +30 -delete
find $BACKUP_DIR -name "env_backup_*" -mtime +30 -delete
find $BACKUP_DIR -name "logs_backup_*" -mtime +30 -delete

echo "Backup completed: $DATE"
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab
# –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 2:00
0 2 * * * /path/to/backup.sh

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00
0 3 * * 0 /path/to/weekly_backup.sh
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°–æ–∑–¥–∞–Ω–∏–µ FAQ

#### –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```markdown
# FAQ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## Q: –ù–µ –ø–æ–ª—É—á–∞—é —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –≤ Telegram –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.

## Q: –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
A: –û–±–Ω–æ–≤–∏—Ç–µ Telegram –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã.

## Q: –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–∏—Å–∞–µ—Ç
A: –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç–∞–π–º–∞—É—Ç–∞.
```

### –°–∏—Å—Ç–µ–º–∞ —Ç–∏–∫–µ—Ç–æ–≤

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
curl -X POST "https://your-domain.com/api/admin/tickets" \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
     -d '{
       "user_id": 123,
       "subject": "–ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ–º",
       "description": "–ù–µ –ø–æ–ª—É—á–∞—é —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞",
       "priority": "medium"
     }'
```

---

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ! üéâ**

–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Å—Ç–µ–º–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Telegram —Å Bitrix24.
