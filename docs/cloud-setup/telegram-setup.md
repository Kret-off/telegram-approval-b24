# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot –¥–ª—è –æ–±–ª–∞—á–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

## üìã –û–±–∑–æ—Ä

Telegram Bot —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º —Å–∏—Å—Ç–µ–º—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π. –û–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è—Ö –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±—ã—Å—Ç—Ä–æ –æ—Ç–≤–µ—á–∞—Ç—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

## üéØ –°–æ–∑–¥–∞–Ω–∏–µ Telegram Bot

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Telegram** –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:** `/newbot`
3. **–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞:** `Telegram Approval Bot`
4. **–í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞:** `your_approval_bot` (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ 'bot')
5. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –û–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞
/setdescription
–û–ø–∏—Å–∞–Ω–∏–µ: –ë–æ—Ç –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ Bitrix24

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
/setabouttext
–û –±–æ—Ç–µ: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ Telegram

# –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
/setcommands
start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
help - –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É
status - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook URL

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ webhook:

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
     -H "Content-Type: application/json" \
     -d '{
       "url": "https://your-domain.com/api/telegram/webhook",
       "allowed_updates": ["message", "callback_query"],
       "drop_pending_updates": true
     }'
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook

```bash
curl -X GET "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

### 3. –£–¥–∞–ª–µ–Ω–∏–µ webhook (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/deleteWebhook"
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –≤ .env

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_BOT_USERNAME=your_approval_bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook URL

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

## üì± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### 1. –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏

```
üìã –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ

üìÑ –î–æ–∫—É–º–µ–Ω—Ç: –ó–∞—è–≤–∫–∞ –Ω–∞ –∑–∞–∫—É–ø–∫—É #12345
üí∞ –°—É–º–º–∞: 150,000 —Ä—É–±.
üìÖ –°—Ä–æ–∫: 24 —á–∞—Å–∞
üë§ –°–æ–∑–¥–∞—Ç–µ–ª—å: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤

[‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å] [üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π]
```

### 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

```
‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–æ

üìÑ –î–æ–∫—É–º–µ–Ω—Ç: –ó–∞—è–≤–∫–∞ –Ω–∞ –∑–∞–∫—É–ø–∫—É #12345
üë§ –û—Ç–≤–µ—Ç–∏–ª: –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤
‚è∞ –í—Ä–µ–º—è: 15:30
üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ

–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω –≤ Bitrix24
```

### 3. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ç–∞–π–º–∞—É—Ç–µ

```
‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏

üìÑ –î–æ–∫—É–º–µ–Ω—Ç: –ó–∞—è–≤–∫–∞ –Ω–∞ –∑–∞–∫—É–ø–∫—É #12345
‚è≥ –û—Å—Ç–∞–ª–æ—Å—å: 2 —á–∞—Å–∞
‚ö†Ô∏è –ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Ç–≤–µ—Ç–∏—Ç—å!

[‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
```

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–æ–∫

### 1. Inline –∫–Ω–æ–ø–∫–∏

```javascript
const keyboard = {
  inline_keyboard: [
    [
      { text: "‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å", callback_data: "approve_123" },
      { text: "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å", callback_data: "reject_123" }
    ],
    [
      { text: "üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π", callback_data: "comment_123" }
    ]
  ]
};
```

### 2. –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

```javascript
const commands = [
  { command: "start", description: "–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º" },
  { command: "help", description: "–ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É" },
  { command: "status", description: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π" },
  { command: "settings", description: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π" }
];
```

## üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫

```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å"
if (callback_data.startsWith('approve_')) {
  const approvalId = callback_data.split('_')[1];
  await approveDocument(approvalId, userId);
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
if (callback_data.startsWith('reject_')) {
  const approvalId = callback_data.split('_')[1];
  await rejectDocument(approvalId, userId);
}
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

```javascript
// –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
const message = update.message.text.toLowerCase();

if (message.includes('—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ') || message.includes('–æ–¥–æ–±—Ä–µ–Ω–æ')) {
  await approveDocument(approvalId, userId);
} else if (message.includes('–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ') || message.includes('–Ω–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ')) {
  await rejectDocument(approvalId, userId);
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook
const isValidRequest = validateTelegramWebhook(request);
if (!isValidRequest) {
  return res.status(403).json({ error: 'Invalid signature' });
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
const isAuthorized = await checkUserAuthorization(userId);
if (!isAuthorized) {
  await bot.sendMessage(chatId, '–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é');
  return;
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
logger.info('Telegram webhook received', {
  userId: update.message.from.id,
  action: 'approval_response',
  approvalId: approvalId,
  response: response
});
```

### 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ—Ü–µ–Ω—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –æ—Ç–≤–µ—Ç–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook

```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/sendMessage" \
     -H "Content-Type: application/json" \
     -d '{
       "chat_id": "YOUR_CHAT_ID",
       "text": "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
       "reply_markup": {
         "inline_keyboard": [
           [{"text": "–¢–µ—Å—Ç", "callback_data": "test"}]
         ]
       }
     }'
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è –≤ Bitrix24

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL webhook
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ callback_data
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [@BotFather](https://t.me/BotFather)
- [Telegram Bot FAQ](https://core.telegram.org/bots/faq)

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```bash
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getMe"

# –ü–æ–ª—É—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates"

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

---

**üéâ –ì–æ—Ç–æ–≤–æ! –í–∞—à Telegram Bot –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**
